export type ModerationResult = { allow: boolean; note?: string|null; hard?: boolean };
const STRICT = process.env.VOG_SAFETY_STRICT === "1";

/** Standard: keine Heuristik, kein Block. Nur Hinweisstring für ganz harte Fälle, wenn STRICT=1. */
export function runModeration(text: string): ModerationResult {
  if (!STRICT) return { allow: true, note: null };
  // Minimaler harter Filter (nur bei STRICT): Beispielwortliste
  const hard = /(kinderpornographie|bombenbauanleitung|aufruf zu gewalt)/i.test(text);
  if (hard) return { allow: false, hard: true, note: "Hard-Block (STRICT) – bitte umformulieren." };
  return { allow: true, note: null };
}
